<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Round5: ROUND5 IMPLEMENTATIONS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Round5
   </div>
   <div id="projectbrief">Implementation of Round5 (configurable version)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ROUND5 IMPLEMENTATIONS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Below you find the instructions to run three implementations of Round5, <code>Reference</code>, <code>Optimized</code>, and <code>Configurable</code> as described in the Round5 specification. These implementations can run all Round5 parameter sets.</p>
<p>The contents are as follows:</p>
<ul>
<li>Prerequisites</li>
<li>Building the implementations</li>
<li>Running the example application</li>
</ul>
<h2>Prerequisites </h2>
<p>To be able to build and run the implementations of the algorithm, the following conditions must be met:</p>
<ul>
<li>The OpenSSL library (preferably 1.1.1, or later) must be installed. Use <code>sudo apt-get install libssl-dev</code> for most Linux distributions. On a Mac, an easy way is to use <a href="https://brew.sh">brew</a>, install it with <code>brew install openssl@1.1</code> and then add it to the <code>CPATH</code> and <code>LIBRARY_PATH</code> environment variables: <div class="fragment"><div class="line">export CPATH=${CPATH+$CPATH:}/usr/local/opt/openssl@1.1/include</div><div class="line">export LIBRARY_PATH=${LIBRARY_PATH+$LIBRARY_PATH:}/usr/local/opt/openssl@1.1/lib</div></div><!-- fragment --></li>
<li><p class="startli">The Keccak library must be installed on your system. This is done as follows:</p><ol type="1">
<li>Linux: Install xsltproc (e.g. <code>sudo apt-get install xsltproc</code>, on a Mac it should already be installed with XCode).</li>
<li>Clone the <a href="https://github.com/XKCP/XKCP.git">XKCP git repository</a>.</li>
<li>Build the library, e.g. using <code>make generic64/libkeccak.a</code> (for alternatives, see the github page).</li>
<li>Add the library to your <code>CPATH</code> and <code>LIBRARY_PATH</code> environment variables: <div class="fragment"><div class="line">export CPATH=${CPATH+$CPATH:}&lt;XKCP_DIRECTORY&gt;/bin/generic64</div><div class="line">export LIBRARY_PATH=${LIBRARY_PATH+$LIBRARY_PATH:}&lt;XKCP_DIRECTORY&gt;/bin/generic64</div></div><!-- fragment --></li>
</ol>
<p class="startli">Note: if you already have installed the keccak library, make sure it is a version where <a href="https://github.com/XKCP/XKCP/issues/51">issue #51</a> has been fixed. If this issue has not been fixed, the reference implementations will not produce the same results as the other implementations.</p>
</li>
<li>To generate the developer documentation, you will need to have Doxygen as well as Graphviz installed. Use <code>sudo apt-get install doxygen; sudo apt-get install graphviz</code> for most Linux distributions. On a Mac, use e.g. <a href="https://brew.sh">brew</a> to install both packages (<code>brew install doxygen; brew install graphviz</code>).</li>
</ul>
<h2>Building the implementations </h2>
<p>After installing the prerequisites, you can build the implementations using <code>make</code>.</p>
<h3>Make targets</h3>
<p>The following make targets are available:</p>
<ul>
<li><code>build</code>: Builds the available implementations. This is the default target.</li>
<li><code>all</code>: Builds the available implementations including the developer documentation.</li>
<li><code>reference</code>: Build just the “reference” implementation.</li>
<li><code>configurable</code>: Build just the “configurable” implementation.</li>
<li><code>optimized</code>: Build just the “optimized” implementation.</li>
<li><code>doc</code>: Generates the developer documentation for the implementations. One can also individually specify a subcategory to create the documentation for.<ul>
<li><code>doc-reference</code>: generates the documentation only for the reference implementation.</li>
<li><code>doc-configurable</code>: generates the documentation only for the configurable implementation.</li>
</ul>
</li>
<li><code>clean</code>: Removes all build artifacts. One can also individually specify a subcategory to clean.<ul>
<li><code>clean-reference</code>: cleans only the reference implementation build artifacts.</li>
<li><code>clean-configurable</code>: cleans only the configurable implementation build artifacts.</li>
<li><code>clean-optimized</code>: cleans only the optimized implementation build artifacts.</li>
</ul>
</li>
</ul>
<h3>Make variables</h3>
<p>The following make variables can be used to influence the build of the implementations.</p>
<ul>
<li><p class="startli"><code>ALG_TYPE</code>: With this variable, the algorithm implemented by the NIST api is specified. For instance, to use <code>R5ND_1PKE_5d</code> write: </p><div class="fragment"><div class="line">make ALG=R5ND_1PKE_5d</div></div><!-- fragment --><p class="startli">The default is <code>R5ND_1KEM_0d</code>. Otherwise, it can be one of: <code>R5ND_1KEM_0d</code>, <code>R5ND_3KEM_0d</code>, <code>R5ND_5KEM_0d</code>, <code>R5ND_1PKE_0d</code>, <code>R5ND_3PKE_0d</code>, <code>R5ND_5PKE_0d</code>, <code>R5ND_1KEM_5d</code>, <code>R5ND_3KEM_5d</code>, <code>R5ND_5KEM_5d</code>, <code>R5ND_1PKE_5d</code>, <code>R5ND_3PKE_5d</code>, <code>R5ND_5PKE_5d</code>, <code>R5N1_1KEM_0d</code>, <code>R5N1_3KEM_0d</code>, <code>R5N1_5KEM_0d</code>, <code>R5N1_1PKE_0d</code>, <code>R5N1_3PKE_0d</code>, <code>R5N1_5PKE_0d</code>, <code>R5ND_0KEM_2iot</code>, <code>R5ND_0PKE_4iot</code>, <code>R5ND_1KEM_4longkey</code>, <code>R5N1_3PKE_0smallCT</code>.</p>
</li>
<li>Instead of specifying <code>ALG</code>, it is possible to select <code>ALG_TYPE</code>, <code>NIST_LEVEL</code>, <code>KEM_PKE</code>, and <code>XEF</code>. For instance: <div class="fragment"><div class="line">make ALG=ND NIST_LEVEL=1 KEM_PKE=PKE XEF=1</div></div><!-- fragment --><ul>
<li><code>ALG_TYPE</code>: Specifies the algorithm type (<code>ND</code> means ring-based, <code>N1</code> means non-ring based) implemented by the NIST api. The default is <code>ND</code>.</li>
<li><code>NIST_LEVEL</code>: Specifies the NIST security level. It can be 1, 3, or 5. The default is 1.</li>
<li><code>KEM_PKE</code>: Specifies the type of algorithm. It can be <code>KEM</code> or <code>PKE</code>. The default is <code>KEM</code>.</li>
<li><code>XEF</code>: When defined, specifies that the error correction variants of the parameter sets should be used (e.g. <code>R5ND_1KEM_5d</code> will be used instead of <code>R5ND_1KEM_0d</code>).</li>
</ul>
</li>
<li>The following four variables, namely <code>TAU</code>, <code>TAU2_LEN</code>, <code>AES</code>, and <code>NO_OPENSSL_SHAKE</code>, control the way matrix A is computed. For instance: <div class="fragment"><div class="line">make TAU=1 AES=1</div></div><!-- fragment --><ul>
<li><code>TAU</code>: Specifies the value of the <code>TAU</code> parameter (0, 1, or 2), i.e. the method for the generation of A.</li>
<li><p class="startli"><code>TAU2_LEN</code>: Specifies the length of the random vector when A is generated with <code>TAU</code> equals 2 (defaults to the value of algorithm parameter <code>q</code>).</p>
<p class="startli">Note: this must be a power of two and larger than algorithm parameter <code>d</code>.</p>
</li>
<li><code>AES</code>: When set to anything other than the empty string or 0, this specifies that the deterministic random values should be generated using AES in CTR mode on “zero” input blocks (with the key equal to the seed) instead of using the default method (i.e. Shake). The AES method can be faster, especially on platforms with a well optimized OpenSSL AES implementation.</li>
<li><code>NO_OPENSSL_SHAKE</code>: When OpenSSL 1.1.1 (or later) is installed, the default is to make use of OpenSSL's Shake implementation. Set this variable to anything other than the empty string to disable the use of OpenSSL's Shake.</li>
</ul>
</li>
<li>Timing and cache attack countermeasures can be enabled by means of <code>CM_CACHE</code> (only applicable to the optimized implementations). For instance: <div class="fragment"><div class="line">make CM_CACHE=1</div></div><!-- fragment --></li>
<li>To indicate that the 64-bit shift left operator with a variable amount can be considered constant-time on your platform, set <code>SHIFT_LEFT64_CONSTANT_TIME</code> to anything other than the empty string (only applicable to the optimized implementation with cache attack counter measures (<code>CM_CACHE</code>) enabled). For instance: <div class="fragment"><div class="line">make CM_CACHE=1 SHIFT_LEFT64_CONSTANT_TIME=1</div></div><!-- fragment --></li>
<li><p class="startli">To allow the use of AVX2 optimisations, set <code>AVX2</code> to anything other than the empty string (only applicable to the optimized implementation, requires an AVX2 compatible CPU/compiler). For instance: </p><div class="fragment"><div class="line">make AVX2=1</div></div><!-- fragment --><p class="startli">Please note that this option also enables the cache attack countermeasures (see <code>CM_CACHE</code>).</p>
</li>
<li><p class="startli">To compile the code for generating NIST KATs, set <code>NIST_KAT_GENERATION</code> to anything other than the empty string. For instance: </p><div class="fragment"><div class="line">make NIST_KAT_GENERATION=1</div></div><!-- fragment --><p class="startli">This replaces the “true” random bytes generator with the NIST (deterministic) random bytes generator and enables the output of intermediate results.</p>
</li>
<li>Finally, the following flag is used for debugging purposes: <code>DEBUG</code>. When set to anything other than the empty string, this variable enables the <em>debug</em> build of the implementation. The <em>debug</em> build generates additional debugging output when run. For instance: <div class="fragment"><div class="line">make DEBUG=1</div></div><!-- fragment --></li>
</ul>
<h2>Running the example application </h2>
<p>The example application is called <code>example</code> (found in the <code>build</code> directory of the implementation).</p>
<p>In the optimized implementation, you can run it for the parameters chosen while making it as: </p><div class="fragment"><div class="line">./example</div></div><!-- fragment --><p>In the reference and configurable implementations, the application can be executed for any configuration at runtime and takes the following arguments:</p>
<ul>
<li><code>-a &lt;PARAMETER-SET-NAME&gt;</code> to specify the name of the parameter set to use. Here &lt;PARAMETER-SET-NAME&gt; is the name of the parameter set to use (i.e. one of <code>R5ND_1KEM_0d</code>, <code>R5ND_3KEM_0d</code>, <code>R5ND_5KEM_0d</code>, <code>R5ND_1PKE_0d</code>, <code>R5ND_3PKE_0d</code>, <code>R5ND_5PKE_0d</code>, <code>R5ND_1KEM_5d</code>, <code>R5ND_3KEM_5d</code>, <code>R5ND_5KEM_5d</code>, <code>R5ND_1PKE_5d</code>, <code>R5ND_3PKE_5d</code>, <code>R5ND_5PKE_5d</code>, <code>R5N1_1KEM_0d</code>, <code>R5N1_3KEM_0d</code>, <code>R5N1_5KEM_0d</code>, <code>R5N1_1PKE_0d</code>, <code>R5N1_3PKE_0d</code>, <code>R5N1_5PKE_0d</code>, <code>R5ND_0KEM_2iot</code>, <code>R5ND_0PKE_4iot</code>, <code>R5ND_1KEM_4longkey</code>, <code>R5N1_3PKE_0smallCT</code>).</li>
<li><code>-t N</code> to specify the tau variant, where N is a number between 0 and 2, as described in the specification (ignored for parameter sets that make use of the ring construction).</li>
</ul>
<p>For instance, in reference you can run: </p><div class="fragment"><div class="line">./example -a R5ND_1KEM_4longkey</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
